(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8437],{5318:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0},8:function(e){function t(n){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?(e.exports=t=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=t=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),t(n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},8991:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearNodeFolder=function(e){e=(0,s.fillOptionsWithDefaults)(e);var t=(0,i.chooseMethod)(e);return"node"===t.type?t.clearNodeFolder().then((function(){return!0})):Promise.resolve(!1)},t.enforceOptions=function(e){r=e},t.BroadcastChannel=void 0;var r,o=n(6202),i=n(4632),s=n(423),a=function(e,t){this.name=e,r&&(t=r),this.options=(0,s.fillOptionsWithDefaults)(t),this.method=(0,i.chooseMethod)(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,function(e){var t=e.method.create(e.name,e.options);(0,o.isPromise)(t)?(e._prepP=t,t.then((function(t){e._state=t}))):e._state=t}(this)};function u(e,t,n){var r={time:e.method.microSeconds(),type:t,data:n};return(e._prepP?e._prepP:Promise.resolve()).then((function(){var t=e.method.postMessage(e._state,r);return e._uMP.add(t),t.catch().then((function(){return e._uMP.delete(t)})),t}))}function c(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function l(e,t,n){e._addEL[t].push(n),function(e){if(!e._iL&&c(e)){var t=function(t){e._addEL[t.type].forEach((function(e){t.time>=e.time&&e.fn(t.data)}))},n=e.method.microSeconds();e._prepP?e._prepP.then((function(){e._iL=!0,e.method.onMessage(e._state,t,n)})):(e._iL=!0,e.method.onMessage(e._state,t,n))}}(e)}function d(e,t,n){e._addEL[t]=e._addEL[t].filter((function(e){return e!==n})),function(e){if(e._iL&&!c(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}(e)}t.BroadcastChannel=a,a._pubkey=!0,a.prototype={postMessage:function(e){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed");return u(this,"message",e)},postInternal:function(e){return u(this,"internal",e)},set onmessage(e){var t={time:this.method.microSeconds(),fn:e};d(this,"message",this._onML),e&&"function"===typeof e?(this._onML=t,l(this,"message",t)):this._onML=null},addEventListener:function(e,t){l(this,e,{time:this.method.microSeconds(),fn:t})},removeEventListener:function(e,t){d(this,e,this._addEL[e].find((function(e){return e.fn===t})))},close:function(){var e=this;if(!this.closed){this.closed=!0;var t=this._prepP?this._prepP:Promise.resolve();return this._onML=null,this._addEL.message=[],t.then((function(){return Promise.all(Array.from(e._uMP))})).then((function(){return Promise.all(e._befC.map((function(e){return e()})))})).then((function(){return e.method.close(e._state)}))}},get type(){return this.method.type},get isClosed(){return this.closed}}},8437:function(e,t,n){"use strict";var r=n(5585);e.exports={BroadcastChannel:r.BroadcastChannel,createLeaderElection:r.createLeaderElection,clearNodeFolder:r.clearNodeFolder,enforceOptions:r.enforceOptions,beLeader:r.beLeader}},5585:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BroadcastChannel",{enumerable:!0,get:function(){return r.BroadcastChannel}}),Object.defineProperty(t,"clearNodeFolder",{enumerable:!0,get:function(){return r.clearNodeFolder}}),Object.defineProperty(t,"enforceOptions",{enumerable:!0,get:function(){return r.enforceOptions}}),Object.defineProperty(t,"createLeaderElection",{enumerable:!0,get:function(){return o.createLeaderElection}}),Object.defineProperty(t,"beLeader",{enumerable:!0,get:function(){return o.beLeader}});var r=n(8991),o=n(6550)},6550:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.beLeader=u,t.createLeaderElection=function(e,t){if(e._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");t=function(e,t){e||(e={});(e=JSON.parse(JSON.stringify(e))).fallbackInterval||(e.fallbackInterval=3e3);e.responseTime||(e.responseTime=t.method.averageResponseTime(t.options));return e}(t,e);var n=new s(e,t);return e._befC.push((function(){return n.die()})),e._leaderElector=n,n};var o=n(6202),i=r(n(2499)),s=function(e,t){this._channel=e,this._options=t,this.isLeader=!1,this.isDead=!1,this.token=(0,o.randomToken)(),this._isApl=!1,this._reApply=!1,this._unl=[],this._lstns=[],this._invs=[],this._dpL=function(){},this._dpLC=!1};function a(e,t){var n={context:"leader",action:t,token:e.token};return e._channel.postInternal(n)}function u(e){e.isLeader=!0;var t=i.default.add((function(){return e.die()}));e._unl.push(t);var n=function(t){"leader"===t.context&&"apply"===t.action&&a(e,"tell"),"leader"!==t.context||"tell"!==t.action||e._dpLC||(e._dpLC=!0,e._dpL(),a(e,"tell"))};return e._channel.addEventListener("internal",n),e._lstns.push(n),a(e,"tell")}s.prototype={applyOnce:function(){var e=this;if(this.isLeader)return Promise.resolve(!1);if(this.isDead)return Promise.resolve(!1);if(this._isApl)return this._reApply=!0,Promise.resolve(!1);this._isApl=!0;var t=!1,n=[],r=function(r){"leader"===r.context&&r.token!=e.token&&(n.push(r),"apply"===r.action&&r.token>e.token&&(t=!0),"tell"===r.action&&(t=!0))};return this._channel.addEventListener("internal",r),a(this,"apply").then((function(){return(0,o.sleep)(e._options.responseTime)})).then((function(){return t?Promise.reject(new Error):a(e,"apply")})).then((function(){return(0,o.sleep)(e._options.responseTime)})).then((function(){return t?Promise.reject(new Error):a(e)})).then((function(){return u(e)})).then((function(){return!0})).catch((function(){return!1})).then((function(t){return e._channel.removeEventListener("internal",r),e._isApl=!1,!t&&e._reApply?(e._reApply=!1,e.applyOnce()):t}))},awaitLeadership:function(){var e;return this._aLP||(this._aLP=(e=this).isLeader?Promise.resolve():new Promise((function(t){var n=!1;function r(){n||(n=!0,clearInterval(o),e._channel.removeEventListener("internal",i),t(!0))}e.applyOnce().then((function(){e.isLeader&&r()}));var o=setInterval((function(){e.applyOnce().then((function(){e.isLeader&&r()}))}),e._options.fallbackInterval);e._invs.push(o);var i=function(t){"leader"===t.context&&"death"===t.action&&e.applyOnce().then((function(){e.isLeader&&r()}))};e._channel.addEventListener("internal",i),e._lstns.push(i)}))),this._aLP},set onduplicate(e){this._dpL=e},die:function(){var e=this;if(!this.isDead)return this.isDead=!0,this._lstns.forEach((function(t){return e._channel.removeEventListener("internal",t)})),this._invs.forEach((function(e){return clearInterval(e)})),this._unl.forEach((function(e){e.remove()})),a(this,"death")}}},4632:function(e,t,n){"use strict";var r=n(5318);n(8);Object.defineProperty(t,"__esModule",{value:!0}),t.chooseMethod=function(e){var t=[].concat(e.methods,c).filter(Boolean);0;if(e.type){if("simulate"===e.type)return a.default;var n=t.find((function(t){return t.type===e.type}));if(n)return n;throw new Error("method-type "+e.type+" not found")}e.webWorkerSupport||u.isNode||(t=t.filter((function(e){return"idb"!==e.type})));var r=t.find((function(e){return e.canBeUsed()}));if(r)return r;throw new Error("No useable method found in "+JSON.stringify(c.map((function(e){return e.type}))))};var o=r(n(6115)),i=r(n(9122)),s=r(n(4924)),a=r(n(1574)),u=n(6202);var c=[o.default,i.default,s.default]},9122:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIdb=u,t.createDatabase=c,t.writeMessage=l,t.getAllMessages=function(e){var t=e.transaction(a).objectStore(a),n=[];return new Promise((function(e){t.openCursor().onsuccess=function(t){var r=t.target.result;r?(n.push(r.value),r.continue()):e(n)}}))},t.getMessagesHigherThan=d,t.removeMessageById=f,t.getOldMessages=p,t.cleanOldMessages=h,t.create=m,t.close=g,t.postMessage=_,t.onMessage=y,t.canBeUsed=w,t.averageResponseTime=M,t.default=t.type=t.microSeconds=void 0;var r=n(6202),o=n(2151),i=n(423),s=r.microSeconds;t.microSeconds=s;var a="messages";function u(){if("undefined"!==typeof indexedDB)return indexedDB;if("undefined"!==typeof window){if("undefined"!==typeof window.mozIndexedDB)return window.mozIndexedDB;if("undefined"!==typeof window.webkitIndexedDB)return window.webkitIndexedDB;if("undefined"!==typeof window.msIndexedDB)return window.msIndexedDB}return!1}function c(e){var t="pubkey.broadcast-channel-0-"+e,n=u().open(t,1);return n.onupgradeneeded=function(e){e.target.result.createObjectStore(a,{keyPath:"id",autoIncrement:!0})},new Promise((function(e,t){n.onerror=function(e){return t(e)},n.onsuccess=function(){e(n.result)}}))}function l(e,t,n){var r={uuid:t,time:(new Date).getTime(),data:n},o=e.transaction([a],"readwrite");return new Promise((function(e,t){o.oncomplete=function(){return e()},o.onerror=function(e){return t(e)},o.objectStore(a).add(r)}))}function d(e,t){var n=e.transaction(a).objectStore(a),r=[];return new Promise((function(e){(function(){try{var e=IDBKeyRange.bound(t+1,1/0);return n.openCursor(e)}catch(r){return n.openCursor()}}()).onsuccess=function(n){var o=n.target.result;o?o.value.id<t+1?o.continue(t+1):(r.push(o.value),o.continue()):e(r)}}))}function f(e,t){var n=e.transaction([a],"readwrite").objectStore(a).delete(t);return new Promise((function(e){n.onsuccess=function(){return e()}}))}function p(e,t){var n=(new Date).getTime()-t,r=e.transaction(a).objectStore(a),o=[];return new Promise((function(e){r.openCursor().onsuccess=function(t){var r=t.target.result;if(r){var i=r.value;if(!(i.time<n))return void e(o);o.push(i),r.continue()}else e(o)}}))}function h(e,t){return p(e,t).then((function(t){return Promise.all(t.map((function(t){return f(e,t.id)})))}))}function m(e,t){return t=(0,i.fillOptionsWithDefaults)(t),c(e).then((function(n){var i={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:(0,r.randomToken)(),eMIs:new o.ObliviousSet(2*t.idb.ttl),writeBlockPromise:Promise.resolve(),messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){i.closed=!0,t.idb.onclose&&t.idb.onclose()},v(i),i}))}function v(e){e.closed||b(e).then((function(){return(0,r.sleep)(e.options.idb.fallbackInterval)})).then((function(){return v(e)}))}function b(e){return e.closed?Promise.resolve():e.messagesCallback?d(e.db,e.lastCursorId).then((function(t){return t.filter((function(e){return!!e})).map((function(t){return t.id>e.lastCursorId&&(e.lastCursorId=t.id),t})).filter((function(t){return function(e,t){return e.uuid!==t.uuid&&!t.eMIs.has(e.id)&&!(e.data.time<t.messagesCallbackTime)}(t,e)})).sort((function(e,t){return e.time-t.time})).forEach((function(t){e.messagesCallback&&(e.eMIs.add(t.id),e.messagesCallback(t.data))})),Promise.resolve()})):Promise.resolve()}function g(e){e.closed=!0,e.db.close()}function _(e,t){return e.writeBlockPromise=e.writeBlockPromise.then((function(){return l(e.db,e.uuid,t)})).then((function(){0===(0,r.randomInt)(0,10)&&h(e.db,e.options.idb.ttl)})),e.writeBlockPromise}function y(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t,b(e)}function w(){return!r.isNode&&!!u()}function M(e){return 2*e.idb.fallbackInterval}t.type="idb";var P={create:m,close:g,onMessage:y,postMessage:_,canBeUsed:w,type:"idb",averageResponseTime:M,microSeconds:s};t.default=P},4924:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalStorage=u,t.storageKey=c,t.postMessage=l,t.addStorageEventListener=d,t.removeStorageEventListener=f,t.create=p,t.close=h,t.onMessage=m,t.canBeUsed=v,t.averageResponseTime=b,t.default=t.type=t.microSeconds=void 0;var r=n(2151),o=n(423),i=n(6202),s=i.microSeconds;t.microSeconds=s;var a="localstorage";function u(){var e;if("undefined"===typeof window)return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch(t){}return e}function c(e){return"pubkey.broadcastChannel-"+e}function l(e,t){return new Promise((function(n){(0,i.sleep)().then((function(){var r=c(e.channelName),o={token:(0,i.randomToken)(),time:(new Date).getTime(),data:t,uuid:e.uuid},s=JSON.stringify(o);u().setItem(r,s);var a=document.createEvent("Event");a.initEvent("storage",!0,!0),a.key=r,a.newValue=s,window.dispatchEvent(a),n()}))}))}function d(e,t){var n=c(e),r=function(e){e.key===n&&t(JSON.parse(e.newValue))};return window.addEventListener("storage",r),r}function f(e){window.removeEventListener("storage",e)}function p(e,t){if(t=(0,o.fillOptionsWithDefaults)(t),!v())throw new Error("BroadcastChannel: localstorage cannot be used");var n=(0,i.randomToken)(),s=new r.ObliviousSet(t.localstorage.removeTimeout),a={channelName:e,uuid:n,eMIs:s};return a.listener=d(e,(function(e){a.messagesCallback&&e.uuid!==n&&e.token&&!s.has(e.token)&&(e.data.time&&e.data.time<a.messagesCallbackTime||(s.add(e.token),a.messagesCallback(e.data)))})),a}function h(e){f(e.listener)}function m(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t}function v(){if(i.isNode)return!1;var e=u();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch(n){return!1}return!0}function b(){var e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")?240:120}t.type=a;var g={create:p,close:h,onMessage:m,postMessage:l,canBeUsed:v,type:a,averageResponseTime:b,microSeconds:s};t.default=g},6115:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.create=s,t.close=a,t.postMessage=u,t.onMessage=c,t.canBeUsed=l,t.averageResponseTime=d,t.default=t.type=t.microSeconds=void 0;var r=n(6202),o=r.microSeconds;t.microSeconds=o;var i="native";function s(e){var t={messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(e){t.messagesCallback&&t.messagesCallback(e.data)},t}function a(e){e.bc.close(),e.subFns=[]}function u(e,t){try{return e.bc.postMessage(t,!1),Promise.resolve()}catch(n){return Promise.reject(n)}}function c(e,t){e.messagesCallback=t}function l(){if(r.isNode&&"undefined"===typeof window)return!1;if("function"===typeof BroadcastChannel){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}return!1}function d(){return 150}t.type=i;var f={create:s,close:a,onMessage:c,postMessage:u,canBeUsed:l,type:i,averageResponseTime:d,microSeconds:o};t.default=f},1574:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.create=s,t.close=a,t.postMessage=u,t.onMessage=c,t.canBeUsed=l,t.averageResponseTime=d,t.default=t.type=t.microSeconds=void 0;var r=n(6202).microSeconds;t.microSeconds=r;var o="simulate";t.type=o;var i=new Set;function s(e){var t={name:e,messagesCallback:null};return i.add(t),t}function a(e){i.delete(e)}function u(e,t){return new Promise((function(n){return setTimeout((function(){Array.from(i).filter((function(t){return t.name===e.name})).filter((function(t){return t!==e})).filter((function(e){return!!e.messagesCallback})).forEach((function(e){return e.messagesCallback(t)})),n()}),5)}))}function c(e,t){e.messagesCallback=t}function l(){return!0}function d(){return 5}var f={create:s,close:a,onMessage:c,postMessage:u,canBeUsed:l,type:o,averageResponseTime:d,microSeconds:r};t.default=f},423:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fillOptionsWithDefaults=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=JSON.parse(JSON.stringify(e));"undefined"===typeof t.webWorkerSupport&&(t.webWorkerSupport=!0);t.idb||(t.idb={});t.idb.ttl||(t.idb.ttl=45e3);t.idb.fallbackInterval||(t.idb.fallbackInterval=150);e.idb&&"function"===typeof e.idb.onclose&&(t.idb.onclose=e.idb.onclose);t.localstorage||(t.localstorage={});t.localstorage.removeTimeout||(t.localstorage.removeTimeout=6e4);e.methods&&(t.methods=e.methods);t.node||(t.node={});t.node.ttl||(t.node.ttl=12e4);"undefined"===typeof t.node.useFastPath&&(t.node.useFastPath=!0);return t}},6202:function(e,t,n){"use strict";var r=n(4155);Object.defineProperty(t,"__esModule",{value:!0}),t.isPromise=function(e){return!(!e||"function"!==typeof e.then)},t.sleep=function(e){e||(e=0);return new Promise((function(t){return setTimeout(t,e)}))},t.randomInt=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},t.randomToken=function(){return Math.random().toString(36).substring(2)},t.microSeconds=function(){var e=(new Date).getTime();return e===o?(i++,1e3*e+i):(o=e,i=0,1e3*e)},t.isNode=void 0;var o=0,i=0;var s="[object process]"===Object.prototype.toString.call("undefined"!==typeof r?r:0);t.isNode=s},5643:function(e){e.exports=!1},2151:function(e,t,n){"use strict";n.r(t),n.d(t,{ObliviousSet:function(){return r},removeTooOldValues:function(){return o},now:function(){return i}});var r=function(){function e(e){this.ttl=e,this.set=new Set,this.timeMap=new Map}return e.prototype.has=function(e){return this.set.has(e)},e.prototype.add=function(e){var t=this;this.timeMap.set(e,i()),this.set.add(e),setTimeout((function(){o(t)}),0)},e.prototype.clear=function(){this.set.clear(),this.timeMap.clear()},e}();function o(e){for(var t=i()-e.ttl,n=e.set[Symbol.iterator]();;){var r=n.next().value;if(!r)return;if(!(e.timeMap.get(r)<t))return;e.timeMap.delete(r),e.set.delete(r)}}function i(){return(new Date).getTime()}},2499:function(e,t,n){"use strict";n.r(t),n.d(t,{add:function(){return d},default:function(){return m},getSize:function(){return h},removeAll:function(){return p},runAll:function(){return f}});var r=n(5643),o=n.n(r);var i={add:function(e){if("function"===typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);else{if("function"!==typeof window.addEventListener)return;window.addEventListener("beforeunload",(function(){e()}),!0),window.addEventListener("unload",(function(){e()}),!0)}}},s=n(199),a=n.n(s),u=o()?a():i,c=new Set,l=!1;function d(e){if(l||(l=!0,u.add(f)),"function"!==typeof e)throw new Error("Listener is no function");return c.add(e),{remove:function(){return c.delete(e)},run:function(){return c.delete(e),e()}}}function f(){var e=[];return c.forEach((function(t){e.push(t()),c.delete(t)})),Promise.all(e)}function p(){c.clear()}function h(){return c.size}var m={add:d,runAll:f,removeAll:p,getSize:h}}}]);